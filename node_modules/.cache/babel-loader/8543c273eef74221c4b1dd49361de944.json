{"ast":null,"code":"import _regeneratorRuntime from\"/Users/hienle/Documents/GitHub/comfortNFT/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/hienle/Documents/GitHub/comfortNFT/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/hienle/Documents/GitHub/comfortNFT/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useCallback,useEffect,useState}from'react';import{useWallet}from'use-wallet';import BigNumber from'bignumber.js';import Context from'./Context';import useYam from'hooks/useYam';import{breedNfts}from'yam-sdk/utils';import useStrainNfts from'hooks/useStrainNfts';import{getAddresses}from'constants/tokenAddresses';import{MIN_LP_AMOUNTS_DISPLAY,PoolIds}from'constants/poolValues';var addresses=getAddresses();var Provider=function Provider(_ref){var children=_ref.children;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isBreeding=_useState2[0],setIsBreeding=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),parentOneNftId=_useState4[0],setParentOneNftId=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),parentTwoNftId=_useState6[0],setParentTwoNftId=_useState6[1];var _useState7=useState('0'),_useState8=_slicedToArray(_useState7,2),burnAmount=_useState8[0],setBurnAmount=_useState8[1];var _useState9=useState('0'),_useState10=_slicedToArray(_useState9,2),stxpAmount=_useState10[0],setStxpAmount=_useState10[1];var _useState11=useState(''),_useState12=_slicedToArray(_useState11,2),childName=_useState12[0],setChildName=_useState12[1];var _useState13=useState(MIN_LP_AMOUNTS_DISPLAY[Number(PoolIds.STRN_ETH)]),_useState14=_slicedToArray(_useState13,2),lpTokenAmount=_useState14[0],setLpTokenAmount=_useState14[1];var _useStrainNfts=useStrainNfts(),strainNftCollection=_useStrainNfts.strainNftCollection;var _useState15=useState(false),_useState16=_slicedToArray(_useState15,2),canBreed=_useState16[0],setCanBreed=_useState16[1];var _useWallet=useWallet(),account=_useWallet.account,ethereum=_useWallet.ethereum;var yam=useYam();var handleBreeding=useCallback(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(yam){_context.next=2;break;}return _context.abrupt(\"return\");case 2:setIsBreeding(true);console.log('parentOneNftId',parentOneNftId,'parentTwoNftId',parentTwoNftId);if(!(parentOneNftId===''||parentTwoNftId==='')){_context.next=6;break;}return _context.abrupt(\"return\",setIsBreeding(false));case 6:_context.next=8;return breedNfts(yam.contracts.strain_nft_crafter,yam.web3.eth,\"0\",// only one pool\nlpTokenAmount,stxpAmount,burnAmount,childName,parentOneNftId,parentTwoNftId,account,function(txHash){setIsBreeding(false);}).catch(function(e){console.error(e);setIsBreeding(false);});case 8:setIsBreeding(false);case 9:case\"end\":return _context.stop();}}},_callee);})),[account,setIsBreeding,yam,parentOneNftId,parentTwoNftId,childName,lpTokenAmount]);var handleCalculateBreedFee=function handleCalculateBreedFee(){if(parentOneNftId===''||parentTwoNftId==='')return\"0\";if(!strainNftCollection||strainNftCollection.length===0)return\"0\";var parentOne=strainNftCollection.find(function(s){return s.nftId===parentOneNftId;});var parentTwo=strainNftCollection.find(function(s){return s.nftId===parentTwoNftId;});if(!(parentOne===null||parentOne===void 0?void 0:parentOne.breedFee)||!(parentTwo===null||parentTwo===void 0?void 0:parentTwo.breedFee))return\"0\";var feeOne=parentOne.breedFee;var feeTwo=parentTwo.breedFee;var totalFeeBN=new BigNumber(feeOne).plus(feeTwo);return String(totalFeeBN.div(new BigNumber(10).pow(18)));};useEffect(function(){return handleCanBreed(parentOneNftId,parentTwoNftId);},[parentOneNftId,parentTwoNftId]);var handleCanBreed=function handleCanBreed(parentOneNftId,parentTwoNftId){if(parentOneNftId===''||parentTwoNftId==='')return setCanBreed(false);// need to get contract call worked out\nsetCanBreed(true);//getCanBreed(yam.contracts.strain_nft_crafter, parentOneNftId, parentTwoNftId).then(result => setCanBreed(result));\n};return/*#__PURE__*/React.createElement(Context.Provider,{value:{parentOneNftId:parentOneNftId,parentTwoNftId:parentTwoNftId,isBreeding:isBreeding,onBreeding:handleBreeding,setBurnAmount:setBurnAmount,setStxpAmount:setStxpAmount,setParentOneNftId:setParentOneNftId,setParentTwoNftId:setParentTwoNftId,burnAmount:burnAmount,stxpAmount:stxpAmount,setChildName:setChildName,childName:childName,lpTokenAmount:lpTokenAmount,setLpTokenAmount:setLpTokenAmount,getBreedingFee:handleCalculateBreedFee,parentsCanBreed:canBreed,strainCrafterAddress:addresses.strainNFTCrafterAddress}},children);};export default Provider;","map":null,"metadata":{},"sourceType":"module"}