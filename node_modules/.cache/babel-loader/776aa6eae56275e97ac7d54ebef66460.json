{"ast":null,"code":"import _taggedTemplateLiteral from\"/Users/hienle/Documents/GitHub/comfortNFT/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";import _slicedToArray from\"/Users/hienle/Documents/GitHub/comfortNFT/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";function _templateObject5(){var data=_taggedTemplateLiteral([\"\\n    font-size: 16px;\\n    color: \",\";\\n    text-decoration: underline;\\n    cursor: pointer;\\n  \"]);_templateObject5=function _templateObject5(){return data;};return data;}function _templateObject4(){var data=_taggedTemplateLiteral([\"\\n    display: flex;\\n    justify-content: space-between;\\n    padding-bottom: 0.25rem;    \\n  \"]);_templateObject4=function _templateObject4(){return data;};return data;}function _templateObject3(){var data=_taggedTemplateLiteral([\"\\n    font-size: 18px;\\n  \"]);_templateObject3=function _templateObject3(){return data;};return data;}function _templateObject2(){var data=_taggedTemplateLiteral([\"\\n    font-size: 16px;\\n    color: \",\";\\n    padding-bottom: 0.15rem;\\n  \"]);_templateObject2=function _templateObject2(){return data;};return data;}function _templateObject(){var data=_taggedTemplateLiteral([\"\\n    display: flex;\\n    justify-content: center;\\n    align-items: flex-start;\\n    min-height: 30vh;\\n  \"]);_templateObject=function _templateObject(){return data;};return data;}import React,{useCallback,useEffect,useState}from'react';import{Button,Modal,ModalActions,ModalContent,ModalTitle}from'react-neu';import TokenInput from'components/TokenInput';import DatePicker from'react-datepicker';import styled from'styled-components';import{useMedia}from'react-use';require('react-datepicker/dist/react-datepicker.css');var DurationStakeModal=function DurationStakeModal(_ref){var isOpen=_ref.isOpen,onDismiss=_ref.onDismiss,onStake=_ref.onStake,label=_ref.label,fullBalance=_ref.fullBalance,maxTimestamp=_ref.maxTimestamp;var secondsInDay=86400;var maxDuration=180*secondsInDay;var minInterval=15*60;var _useState=useState(''),_useState2=_slicedToArray(_useState,2),val=_useState2[0],setVal=_useState2[1];var _useState3=useState(minInterval),_useState4=_slicedToArray(_useState3,2),duration=_useState4[0],setDuration=_useState4[1];var _useState5=useState(new Date()),_useState6=_slicedToArray(_useState5,2),durationDate=_useState6[0],setDurationDate=_useState6[1];var _useState7=useState(0),_useState8=_slicedToArray(_useState7,2),boost=_useState8[0],setBoost=_useState8[1];var _useState9=useState(),_useState10=_slicedToArray(_useState9,2),maxDate=_useState10[0],setMaxDate=_useState10[1];var below800=useMedia('(max-width: 800px)');useEffect(function(){if(maxTimestamp===null||maxTimestamp===void 0?void 0:maxTimestamp.gt(0)){setMaxDate(new Date((maxTimestamp===null||maxTimestamp===void 0?void 0:maxTimestamp.toNumber())*1000));}},[maxTimestamp]);useEffect(function(){if(durationDate){var maxTime=Math.floor(durationDate.getTime()/1000);if(maxTimestamp&&maxTime>(maxTimestamp===null||maxTimestamp===void 0?void 0:maxTimestamp.toNumber())){maxTime=maxTimestamp.toNumber();}var dur=Math.floor(maxTime-new Date().getTime()/1000);// 1 + (3.2 * <duration> / 180)\nvar calcBoost=1+3.2*dur/maxDuration;setBoost(calcBoost);if(dur>0)setDuration(dur);}},[durationDate]);var handleChange=useCallback(function(e){setVal(e.currentTarget.value);},[setVal]);var onMaxDuration=useCallback(function(){if(maxTimestamp)setDurationDate(new Date(maxTimestamp.toNumber()*1000));},[setDurationDate,maxTimestamp]);var handleSelectMax=useCallback(function(){setVal(String(fullBalance||0));},[fullBalance,setVal]);var handleStakeClick=useCallback(function(){onStake(String(duration),val);},[onStake,val]);var StyledCenter=styled.div(_templateObject());var StyledLabel=styled.div(_templateObject2(),function(props){return props.theme.colors.grey[500];});var StyledLabelValue=styled.div(_templateObject3());var SpaceBetweenRow=styled.div(_templateObject4());var MaxLockup=styled.span(_templateObject5(),function(props){return props.theme.colors.primary.light;});return/*#__PURE__*/React.createElement(Modal,{isOpen:isOpen},/*#__PURE__*/React.createElement(ModalTitle,{text:\"Stake\"}),/*#__PURE__*/React.createElement(ModalContent,null,/*#__PURE__*/React.createElement(SpaceBetweenRow,null,/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(StyledLabel,null,\"Lock up reward boost:\"),/*#__PURE__*/React.createElement(StyledLabelValue,null,boost.toFixed(2))),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(MaxLockup,{onClick:onMaxDuration},\"Max Lock Period\"),/*#__PURE__*/React.createElement(StyledLabel,null,\"Lock stake till:\"),/*#__PURE__*/React.createElement(StyledLabelValue,null,durationDate===null||durationDate===void 0?void 0:durationDate.toDateString()))),/*#__PURE__*/React.createElement(StyledCenter,null,/*#__PURE__*/React.createElement(DatePicker,{selected:durationDate,onChange:function onChange(date){if(date&&date!==durationDate){setDurationDate(date);}},minDate:new Date(new Date().getTime()+secondsInDay*1000),maxDate:maxDate,monthsShown:below800?1:2,inline:true})),/*#__PURE__*/React.createElement(TokenInput,{value:val,onSelectMax:handleSelectMax,onChange:handleChange,max:String(fullBalance||0),symbol:label})),/*#__PURE__*/React.createElement(ModalActions,null,/*#__PURE__*/React.createElement(Button,{onClick:onDismiss,text:\"Cancel\",variant:\"secondary\"}),/*#__PURE__*/React.createElement(Button,{disabled:!val||!Number(val)||duration===0,onClick:handleStakeClick,text:\"Stake\",variant:!val||!Number(val)?'secondary':'default'})));};export default DurationStakeModal;","map":null,"metadata":{},"sourceType":"module"}