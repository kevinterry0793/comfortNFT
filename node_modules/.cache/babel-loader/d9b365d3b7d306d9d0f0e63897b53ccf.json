{"ast":null,"code":"var _jsxFileName = \"/Users/hienle/Documents/GitHub/comfortNFT/src/views/Stake/Stake.tsx\";\nimport React, { useEffect, useState } from \"react\";\nimport { Container, Spacer } from \"react-neu\";\nimport Page from \"components/Page\";\nimport PageHeader from \"components/PageHeader\";\nimport Split from \"components/Split\";\nimport SingleHarvestCard from \"./SingleHarvest\";\nimport SingleStakeCard from \"./SingleStake\";\nimport useStaking from \"hooks/useStaking\";\nimport BigNumber from \"bignumber.js\";\nimport styled from \"styled-components\";\nconst StyledNotice = styled.div`\n  display: flex;\n  flex-flow: column;\n  justify-content: center;\n  align-items: center;\n  font-size: 18px;\n  font-weight: 600;\n  width: 100%;\n  color: ${props => props.theme.colors.primary.main};\n`;\n\nconst Stake = () => {\n  const {\n    userStakes\n  } = useStaking();\n  const [showContactMessage, setShowContactMessage] = useState(false);\n  const [showHasUnstaked, setShowHasUnstaked] = useState(false);\n  useEffect(() => {\n    if (userStakes) {\n      // see 1 and 2 in SingleStake.tsx\n      // 1. if any stake with amount == 0 and lockDate > 0 disable stake button\n      // 2. if any stake lockDate > currentTime disable unstake button.\n      // 3. if there is stake with amount ==0 followed by any stake with amount > 0 then have them contact us for help\n      const hasUnstaked = userStakes.filter(s => new BigNumber(s.amount).eq(0));\n      setShowHasUnstaked(hasUnstaked.length > 0);\n\n      if (hasUnstaked.length > 0) {\n        const contactMessage = userStakes.filter(s => new BigNumber(s.amount).gt(0));\n        setShowContactMessage(contactMessage.length > 0);\n      }\n    }\n  }, [userStakes]);\n  return /*#__PURE__*/React.createElement(Page, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Container, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(PageHeader, {\n    imgSrc: \"\",\n    subtitle: \"One stake per account\",\n    title: \"Stake COMF, earn COMFP\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(Split, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(SingleStakeCard, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(SingleHarvestCard, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(Spacer, {\n    size: \"lg\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(PageHeader, {\n    imgSrc: \"\",\n    subtitle: \"Unstaking automatically claims COMFP\",\n    title: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(Spacer, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(Spacer, {\n    size: \"md\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 9\n    }\n  }), showContactMessage && /*#__PURE__*/React.createElement(StyledNotice, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 13\n    }\n  }, \"There might be an issue with your COMF stake.\"), /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 13\n    }\n  }, \"Please contact us in discord, see link below.\")), /*#__PURE__*/React.createElement(Spacer, {\n    size: \"md\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 9\n    }\n  }), showHasUnstaked && /*#__PURE__*/React.createElement(StyledNotice, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 13\n    }\n  }, \"This account has already staked and unstaked.\"), /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 13\n    }\n  }, \"Staking is been disabled. You can use a different account.\"))));\n};\n\nexport default Stake;","map":{"version":3,"sources":["/Users/hienle/Documents/GitHub/comfortNFT/src/views/Stake/Stake.tsx"],"names":["React","useEffect","useState","Container","Spacer","Page","PageHeader","Split","SingleHarvestCard","SingleStakeCard","useStaking","BigNumber","styled","StyledNotice","div","props","theme","colors","primary","main","Stake","userStakes","showContactMessage","setShowContactMessage","showHasUnstaked","setShowHasUnstaked","hasUnstaked","filter","s","amount","eq","length","contactMessage","gt"],"mappings":"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","sourcesContent":["import React, { useEffect, useMemo, useState } from \"react\";\n\nimport { Container, Spacer } from \"react-neu\";\n\nimport Page from \"components/Page\";\nimport PageHeader from \"components/PageHeader\";\nimport Split from \"components/Split\";\n\nimport SingleHarvestCard from \"./SingleHarvest\";\nimport SingleStakeCard from \"./SingleStake\";\nimport useStaking from \"hooks/useStaking\";\nimport BigNumber from \"bignumber.js\";\nimport styled from \"styled-components\";\n\nconst StyledNotice = styled.div`\n  display: flex;\n  flex-flow: column;\n  justify-content: center;\n  align-items: center;\n  font-size: 18px;\n  font-weight: 600;\n  width: 100%;\n  color: ${(props) => props.theme.colors.primary.main};\n`;\n\nconst Stake: React.FC = () => {\n  const { userStakes } = useStaking();\n\n  const [showContactMessage, setShowContactMessage] = useState<boolean>(false);\n  const [showHasUnstaked, setShowHasUnstaked] = useState<boolean>(false);\n\n  useEffect(() => {\n    if (userStakes) {\n      // see 1 and 2 in SingleStake.tsx\n      // 1. if any stake with amount == 0 and lockDate > 0 disable stake button\n      // 2. if any stake lockDate > currentTime disable unstake button.\n\n      // 3. if there is stake with amount ==0 followed by any stake with amount > 0 then have them contact us for help\n      const hasUnstaked = userStakes.filter((s) =>\n        new BigNumber(s.amount).eq(0)\n      );\n      setShowHasUnstaked(hasUnstaked.length > 0);\n      if (hasUnstaked.length > 0) {\n        const contactMessage = userStakes.filter((s) =>\n          new BigNumber(s.amount).gt(0)\n        );\n        setShowContactMessage(contactMessage.length > 0);\n      }\n    }\n  }, [userStakes]);\n\n  return (\n    <Page>\n      <Container>\n        <PageHeader\n          imgSrc=\"\"\n          subtitle=\"One stake per account\"\n          title=\"Stake COMF, earn COMFP\"\n        />\n        <Split>\n          <SingleStakeCard />\n          <SingleHarvestCard />\n        </Split>\n        <Spacer size=\"lg\" />\n        <PageHeader\n          imgSrc=\"\"\n          subtitle=\"Unstaking automatically claims COMFP\"\n          title=\"\"\n        />\n        <Spacer />\n        <Spacer size=\"md\" />\n        {showContactMessage && (\n          <StyledNotice>\n            <span>There might be an issue with your COMF stake.</span>\n            <span>Please contact us in discord, see link below.</span>\n          </StyledNotice>\n        )}\n        <Spacer size=\"md\" />\n        {showHasUnstaked && (\n          <StyledNotice>\n            <span>This account has already staked and unstaked.</span>\n            <span>\n              Staking is been disabled. You can use a different account.\n            </span>\n          </StyledNotice>\n        )}\n      </Container>\n    </Page>\n  );\n};\n\nexport default Stake;\n"]},"metadata":{},"sourceType":"module"}