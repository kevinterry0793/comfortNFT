{"ast":null,"code":"var _jsxFileName = \"/Users/hienle/Documents/GitHub/comfortNFT/src/views/BurnOldNfts/StyledOldNft.tsx\";\nimport { attributeNames, DEFAULT_NFT_SIZE, POOL_NAMES, PoolIds, ENABLE_BURN_REWARDS_AMOUNT } from \"constants/poolValues\";\nimport useStrainNfts from \"hooks/useStrainNfts\";\nimport React, { useEffect, useMemo, useState } from \"react\";\nimport { Spacer } from \"react-neu\";\nimport numeral from \"numeral\";\nimport styled from \"styled-components\";\nimport { Tooltip } from \"react-lightweight-tooltip\"; // import AdditionalStakeModal from \"views/Modals/AdditionalStakeModal\";\n\nimport useBalances from \"hooks/useBalances\";\nimport StyledPrimaryButton from \"views/Common/StyledButton\";\n\nconst StyledNft = ({\n  nft\n}) => {\n  var _updatedNft$attribs3;\n\n  const [isNftLoading, setIsNftLoading] = useState(false);\n  const [updatedNft, setUpdatedNft] = useState();\n  const [canBurn, setCanBurn] = useState(false); // const [addStakeModalIsOpen, setAddStakeModalIsOpen] = useState<boolean>(\n  //   false\n  // );\n\n  const {\n    onRetrieve,\n    onRetrieveOld,\n    onDestroyNft,\n    earnedStrnBalance,\n    isAdding,\n    onAddNftStake\n  } = useStrainNfts();\n  const {\n    strnEthLpBalance,\n    strnXiotLpBalance\n  } = useBalances();\n  const poolName = useMemo(() => POOL_NAMES[Number(nft === null || nft === void 0 ? void 0 : nft.poolId)], [nft === null || nft === void 0 ? void 0 : nft.poolId]);\n  useEffect(() => {\n    if (nft && !updatedNft) {\n      setIsNftLoading(true);\n      onRetrieveOld(nft).then(updated => {\n        setUpdatedNft(updated);\n        setIsNftLoading(false);\n      }).catch(e => {\n        console.error(e);\n        setIsNftLoading(false);\n      });\n    }\n  }, [nft === null || nft === void 0 ? void 0 : nft.nftId, updatedNft]);\n  useEffect(() => {\n    if (earnedStrnBalance === undefined) return setCanBurn(false);\n    setCanBurn(earnedStrnBalance.lte(ENABLE_BURN_REWARDS_AMOUNT));\n  }, [earnedStrnBalance]);\n\n  const getAttribute = name => {\n    var _updatedNft$attribs;\n\n    if (!updatedNft) return \"-\";\n    const attributes = updatedNft === null || updatedNft === void 0 ? void 0 : (_updatedNft$attribs = updatedNft.attribs) === null || _updatedNft$attribs === void 0 ? void 0 : _updatedNft$attribs.attributes;\n    if (!attributes) return \"-\";\n    const found = attributes.find(a => a.trait_type === name);\n    if (!found) return \"-\";\n    return found.value;\n  };\n\n  const getName = () => {\n    var _updatedNft$attribs2;\n\n    if (!nft) return \"-\";\n    if (nft === null || nft === void 0 ? void 0 : nft.nftName) return nft === null || nft === void 0 ? void 0 : nft.nftName;\n    return updatedNft === null || updatedNft === void 0 ? void 0 : (_updatedNft$attribs2 = updatedNft.attribs) === null || _updatedNft$attribs2 === void 0 ? void 0 : _updatedNft$attribs2.name;\n  };\n\n  const handelUnstake = () => {\n    if (!(nft === null || nft === void 0 ? void 0 : nft.poolId)) {\n      console.error(\"for some reason the nft doesn't have a pool id\");\n      return;\n    }\n\n    onDestroyNft(nft.poolId, nft);\n  }; // const handleAddStakeClick = useCallback(() => {\n  //   setAddStakeModalIsOpen(true);\n  // }, [setAddStakeModalIsOpen]);\n  // const handleDismissStakeModal = useCallback(() => {\n  //   setAddStakeModalIsOpen(false);\n  // }, [setAddStakeModalIsOpen]);\n  // const handleOnAdditionalStake = useCallback(\n  //   (amount: string, stxpAmount: string) => {\n  //     const poolId = nft?.poolId || \"0\"; // assume pool 0, nft?.poolId should always be populated\n  //     onAddNftStake(poolId, nft.nftId, amount, stxpAmount);\n  //     handleDismissStakeModal();\n  //   },\n  //   [handleDismissStakeModal, onAddNftStake]\n  // );\n\n\n  const walletBalance = useMemo(() => {\n    // need better way to get specific pool balance\n    return nft.poolId === \"0\" ? strnEthLpBalance : strnXiotLpBalance;\n  }, [strnEthLpBalance, strnXiotLpBalance]);\n  const formattedLPBalance = useMemo(() => {\n    if (nft && (nft === null || nft === void 0 ? void 0 : nft.lpBalance)) {\n      if (PoolIds.STRN_ETH === nft.poolId) return numeral(nft.lpBalance).format(\"0.00a\");else return nft.lpBalance.toFixed(8);\n    } else {\n      return \"--\";\n    }\n  }, [nft]);\n  const greenRoundedStyle = {\n    content: {\n      backgroundColor: \"hsl(215deg 70.4% 33.1% / 100%)\",\n      color: \"#FFFFFF\",\n      fontWeight: 600\n    },\n    wrapper: {},\n    gap: {},\n    tooltip: {\n      backgroundColor: \"hsl(215deg 70.4% 33.1% / 100%)\",\n      borderRadius: \"10px\"\n    },\n    arrow: {\n      borderTop: \"solid hsl(215deg 70.4% 33.1% / 100%) 5px\"\n    }\n  };\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(NFTCard, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 7\n    }\n  }, !isNftLoading && /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(StyledHeader, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(StyledTitle, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 15\n    }\n  }, getName()), /*#__PURE__*/React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 15\n    }\n  }, \"#\", getAttribute(attributeNames.MINTED))), /*#__PURE__*/React.createElement(\"h4\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 13\n    }\n  }, getAttribute(attributeNames.VIBES)), /*#__PURE__*/React.createElement(Spacer, {\n    size: \"sm\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"img\", {\n    src: updatedNft === null || updatedNft === void 0 ? void 0 : (_updatedNft$attribs3 = updatedNft.attribs) === null || _updatedNft$attribs3 === void 0 ? void 0 : _updatedNft$attribs3.image,\n    height: DEFAULT_NFT_SIZE,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(Spacer, {\n    size: \"sm\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(RarityPill, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 13\n    }\n  }, getAttribute(attributeNames.RARITY)), /*#__PURE__*/React.createElement(StyledInfo, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Tooltip, {\n    styles: greenRoundedStyle,\n    content: !canBurn ? \"In order to burn your NFT, you must first claim your rewards.\" : \"Burning will release your LP tokens\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(StyledPrimaryButton, {\n    onClick: handelUnstake,\n    disabled: nft.isDestroying || !canBurn,\n    text: !canBurn ? \"Claim first (i)\" : nft.isDestroying ? \"Burning ...\" : \"Burn\",\n    size: \"sm\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 17\n    }\n  })), /*#__PURE__*/React.createElement(StyledLabels, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 171,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(StyledLpLabel, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 173,\n      columnNumber: 19\n    }\n  }, poolName), /*#__PURE__*/React.createElement(StyledValue, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 174,\n      columnNumber: 19\n    }\n  }, (nft === null || nft === void 0 ? void 0 : nft.lpBalance) ? formattedLPBalance : \"-\"))))), isNftLoading && /*#__PURE__*/React.createElement(StyledLoading, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 182,\n      columnNumber: 26\n    }\n  }, \"Loading ...\")), /*#__PURE__*/React.createElement(Spacer, {\n    size: \"md\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 184,\n      columnNumber: 7\n    }\n  }));\n};\n\nconst StyledLpLabel = styled.div`\n  display: flex;\n  flex-flow: column nowrap;\n  margin-right: 0.5rem;\n`;\nconst StyledHeader = styled.div`\n  margin: 0 1rem;\n  display: flex;\n  justify-content: space-between;\n`;\nconst StyledTitle = styled.h3`\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  overflow: hidden;\n`;\nconst NFTCard = styled.div`\n  display: flex;\n  flex-flow: column;\n  width: 300px;\n  max-height: 450px;\n  background-color: #0e2b52;\n  border-radius: 20px;\n  color: white;\n  text-align: center;\n  display: inline-block !important;\n  margin: 1rem;\n`;\nconst RarityPill = styled.button`\n  width: 100px;\n  height: 26px;\n  background-color: #7af7b6;\n  border: 0;\n  border-radius: 6px;\n  font-family: Gopher;\n`;\nconst StyledLoading = styled.div`\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  width: 100%;\n  height: 100%;\n`;\nconst StyledInfo = styled.div`\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin: 1rem;\n`;\nconst StyledLabels = styled.div`\n  display: flex;\n  flex-flow: row wrap;\n  justify-content: flex-start;\n\n  > div {\n    width: unset;\n  }\n`;\nconst StyledValue = styled.span`\n  font-size: 18px;\n  font-weight: 600;\n`;\nexport default StyledNft;","map":{"version":3,"sources":["/Users/hienle/Documents/GitHub/comfortNFT/src/views/BurnOldNfts/StyledOldNft.tsx"],"names":["attributeNames","DEFAULT_NFT_SIZE","POOL_NAMES","PoolIds","ENABLE_BURN_REWARDS_AMOUNT","useStrainNfts","React","useEffect","useMemo","useState","Spacer","numeral","styled","Tooltip","useBalances","StyledPrimaryButton","StyledNft","nft","isNftLoading","setIsNftLoading","updatedNft","setUpdatedNft","canBurn","setCanBurn","onRetrieve","onRetrieveOld","onDestroyNft","earnedStrnBalance","isAdding","onAddNftStake","strnEthLpBalance","strnXiotLpBalance","poolName","Number","poolId","then","updated","catch","e","console","error","nftId","undefined","lte","getAttribute","name","attributes","attribs","found","find","a","trait_type","value","getName","nftName","handelUnstake","walletBalance","formattedLPBalance","lpBalance","STRN_ETH","format","toFixed","greenRoundedStyle","content","backgroundColor","color","fontWeight","wrapper","gap","tooltip","borderRadius","arrow","borderTop","MINTED","VIBES","image","RARITY","isDestroying","StyledLpLabel","div","StyledHeader","StyledTitle","h3","NFTCard","RarityPill","button","StyledLoading","StyledInfo","StyledLabels","StyledValue","span"],"mappings":"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","sourcesContent":["import {\n  attributeNames,\n  DEFAULT_NFT_SIZE,\n  POOL_NAMES,\n  PoolIds,\n  ENABLE_BURN_REWARDS_AMOUNT,\n  oldNftInstance,\n} from \"constants/poolValues\";\nimport useStrainNfts from \"hooks/useStrainNfts\";\nimport React, { useCallback, useEffect, useMemo, useState } from \"react\";\n\nimport { Spacer } from \"react-neu\";\nimport numeral from \"numeral\";\nimport styled from \"styled-components\";\nimport { Tooltip } from \"react-lightweight-tooltip\";\n// import AdditionalStakeModal from \"views/Modals/AdditionalStakeModal\";\nimport useBalances from \"hooks/useBalances\";\nimport StyledPrimaryButton from \"views/Common/StyledButton\";\n\nconst StyledNft = ({ nft }: { nft: oldNftInstance }) => {\n  const [isNftLoading, setIsNftLoading] = useState(false);\n  const [updatedNft, setUpdatedNft] = useState<oldNftInstance>();\n  const [canBurn, setCanBurn] = useState<boolean>(false);\n  // const [addStakeModalIsOpen, setAddStakeModalIsOpen] = useState<boolean>(\n  //   false\n  // );\n\n  const {\n    onRetrieve,\n    onRetrieveOld,\n    onDestroyNft,\n    earnedStrnBalance,\n    isAdding,\n    onAddNftStake,\n  } = useStrainNfts();\n\n  const { strnEthLpBalance, strnXiotLpBalance } = useBalances();\n\n  const poolName = useMemo(() => POOL_NAMES[Number(nft?.poolId)], [\n    nft?.poolId,\n  ]);\n\n  useEffect(() => {\n    if (nft && !updatedNft) {\n      setIsNftLoading(true);\n      onRetrieveOld(nft)\n        .then((updated: oldNftInstance) => {\n          setUpdatedNft(updated);\n          setIsNftLoading(false);\n        })\n        .catch((e: Error) => {\n          console.error(e);\n          setIsNftLoading(false);\n        });\n    }\n  }, [nft?.nftId, updatedNft]);\n\n  useEffect(() => {\n    if (earnedStrnBalance === undefined) return setCanBurn(false);\n    setCanBurn(earnedStrnBalance.lte(ENABLE_BURN_REWARDS_AMOUNT));\n  }, [earnedStrnBalance]);\n\n  const getAttribute = (name: string): string => {\n    if (!updatedNft) return \"-\";\n    const attributes = updatedNft?.attribs?.attributes;\n    if (!attributes) return \"-\";\n    const found = attributes.find((a) => a.trait_type === name);\n    if (!found) return \"-\";\n    return found.value;\n  };\n\n  const getName = () => {\n    if (!nft) return \"-\";\n    if (nft?.nftName) return nft?.nftName;\n    return updatedNft?.attribs?.name;\n  };\n\n  const handelUnstake = () => {\n    if (!nft?.poolId) {\n      console.error(\"for some reason the nft doesn't have a pool id\");\n      return;\n    }\n    onDestroyNft(nft.poolId, nft);\n  };\n\n  // const handleAddStakeClick = useCallback(() => {\n  //   setAddStakeModalIsOpen(true);\n  // }, [setAddStakeModalIsOpen]);\n\n  // const handleDismissStakeModal = useCallback(() => {\n  //   setAddStakeModalIsOpen(false);\n  // }, [setAddStakeModalIsOpen]);\n\n  // const handleOnAdditionalStake = useCallback(\n  //   (amount: string, stxpAmount: string) => {\n  //     const poolId = nft?.poolId || \"0\"; // assume pool 0, nft?.poolId should always be populated\n  //     onAddNftStake(poolId, nft.nftId, amount, stxpAmount);\n  //     handleDismissStakeModal();\n  //   },\n  //   [handleDismissStakeModal, onAddNftStake]\n  // );\n\n  const walletBalance = useMemo(() => {\n    // need better way to get specific pool balance\n    return nft.poolId === \"0\" ? strnEthLpBalance : strnXiotLpBalance;\n  }, [strnEthLpBalance, strnXiotLpBalance]);\n\n  const formattedLPBalance = useMemo(() => {\n    if (nft && nft?.lpBalance) {\n      if (PoolIds.STRN_ETH === nft.poolId)\n        return numeral(nft.lpBalance).format(\"0.00a\");\n      else return nft.lpBalance.toFixed(8);\n    } else {\n      return \"--\";\n    }\n  }, [nft]);\n\n  const greenRoundedStyle = {\n    content: {\n      backgroundColor: \"hsl(215deg 70.4% 33.1% / 100%)\",\n      color: \"#FFFFFF\",\n      fontWeight: 600,\n    },\n    wrapper: {},\n    gap: {},\n    tooltip: {\n      backgroundColor: \"hsl(215deg 70.4% 33.1% / 100%)\",\n      borderRadius: \"10px\",\n    },\n    arrow: {\n      borderTop: \"solid hsl(215deg 70.4% 33.1% / 100%) 5px\",\n    },\n  };\n\n  return (\n    <>\n      <NFTCard>\n        {!isNftLoading && (\n          <>\n            <StyledHeader>\n              <StyledTitle>{getName()}</StyledTitle>\n              <h3>#{getAttribute(attributeNames.MINTED)}</h3>\n            </StyledHeader>\n            <h4>{getAttribute(attributeNames.VIBES)}</h4>\n            <Spacer size=\"sm\" />\n            <img src={updatedNft?.attribs?.image} height={DEFAULT_NFT_SIZE} />\n            <Spacer size=\"sm\" />\n            <RarityPill>{getAttribute(attributeNames.RARITY)}</RarityPill>\n            <StyledInfo>\n              <Tooltip\n                styles={greenRoundedStyle}\n                content={\n                  !canBurn\n                    ? \"In order to burn your NFT, you must first claim your rewards.\"\n                    : \"Burning will release your LP tokens\"\n                }\n              >\n                <StyledPrimaryButton\n                  onClick={handelUnstake}\n                  disabled={nft.isDestroying || !canBurn}\n                  text={\n                    !canBurn\n                      ? \"Claim first (i)\"\n                      : nft.isDestroying\n                      ? \"Burning ...\"\n                      : \"Burn\"\n                  }\n                  size=\"sm\"\n                />\n              </Tooltip>\n              <StyledLabels>\n                <StyledLpLabel>\n                  <div>{poolName}</div>\n                  <StyledValue>\n                    {nft?.lpBalance ? formattedLPBalance : \"-\"}\n                  </StyledValue>\n                </StyledLpLabel>\n              </StyledLabels>\n            </StyledInfo>\n          </>\n        )}\n        {isNftLoading && <StyledLoading>Loading ...</StyledLoading>}\n      </NFTCard>\n      <Spacer size=\"md\" />\n    </>\n  );\n};\n\nconst StyledLpLabel = styled.div`\n  display: flex;\n  flex-flow: column nowrap;\n  margin-right: 0.5rem;\n`;\n\nconst StyledHeader = styled.div`\n  margin: 0 1rem;\n  display: flex;\n  justify-content: space-between;\n`;\n\nconst StyledTitle = styled.h3`\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  overflow: hidden;\n`;\n\nconst NFTCard = styled.div`\n  display: flex;\n  flex-flow: column;\n  width: 300px;\n  max-height: 450px;\n  background-color: #0e2b52;\n  border-radius: 20px;\n  color: white;\n  text-align: center;\n  display: inline-block !important;\n  margin: 1rem;\n`;\nconst RarityPill = styled.button`\n  width: 100px;\n  height: 26px;\n  background-color: #7af7b6;\n  border: 0;\n  border-radius: 6px;\n  font-family: Gopher;\n`;\n\nconst StyledLoading = styled.div`\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  width: 100%;\n  height: 100%;\n`;\n\nconst StyledInfo = styled.div`\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin: 1rem;\n`;\n\nconst StyledLabels = styled.div`\n  display: flex;\n  flex-flow: row wrap;\n  justify-content: flex-start;\n\n  > div {\n    width: unset;\n  }\n`;\n\nconst StyledValue = styled.span`\n  font-size: 18px;\n  font-weight: 600;\n`;\n\nexport default StyledNft;\n"]},"metadata":{},"sourceType":"module"}