{"ast":null,"code":"import _regeneratorRuntime from\"/Users/hienle/Documents/GitHub/comfortNFT/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/hienle/Documents/GitHub/comfortNFT/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/hienle/Documents/GitHub/comfortNFT/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useCallback,useState,useEffect}from'react';import{useWallet}from'use-wallet';import{approve}from'utils';import useAllowance from'./useAllowance';var useApproval=function useApproval(tokenAddress,spenderAddress,onTxHash){var allowance=useAllowance(tokenAddress,spenderAddress);var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isApproving=_useState2[0],setIsApproving=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isApproved=_useState4[0],setIsApproved=_useState4[1];var _useWallet=useWallet(),account=_useWallet.account,ethereum=_useWallet.ethereum;var handleApprove=useCallback(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var result;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!(!ethereum||!account||!spenderAddress||!tokenAddress)){_context.next=2;break;}return _context.abrupt(\"return\");case 2:_context.prev=2;setIsApproving(true);_context.next=6;return approve(account,spenderAddress,tokenAddress,ethereum,onTxHash);case 6:result=_context.sent;setIsApproved(result);setIsApproving(false);_context.next=15;break;case 11:_context.prev=11;_context.t0=_context[\"catch\"](2);setIsApproving(false);return _context.abrupt(\"return\",false);case 15:case\"end\":return _context.stop();}}},_callee,null,[[2,11]]);})),[account,ethereum,onTxHash,setIsApproved,setIsApproving,spenderAddress,tokenAddress]);useEffect(function(){if(!!(allowance===null||allowance===void 0?void 0:allowance.toNumber())){setIsApproved(true);}},[allowance,setIsApproved]);return{isApproved:isApproved,isApproving:isApproving,onApprove:handleApprove};};export default useApproval;","map":null,"metadata":{},"sourceType":"module"}