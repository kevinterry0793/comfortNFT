{"ast":null,"code":"import _taggedTemplateLiteral from\"/Users/hienle/Documents/GitHub/comfortNFT/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";import _slicedToArray from\"/Users/hienle/Documents/GitHub/comfortNFT/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";function _templateObject9(){var data=_taggedTemplateLiteral([\"\\n  font-size: 18px;\\n  font-weight: 600;\\n\"]);_templateObject9=function _templateObject9(){return data;};return data;}function _templateObject8(){var data=_taggedTemplateLiteral([\"\\n  display: flex;\\n  flex-flow: row wrap;\\n  justify-content: flex-start;\\n\\n  > div {\\n    width: unset;\\n  }\\n\"]);_templateObject8=function _templateObject8(){return data;};return data;}function _templateObject7(){var data=_taggedTemplateLiteral([\"\\n  display: flex;\\n  justify-content: space-between;\\n  align-items: center;\\n  margin: 1rem;\\n\"]);_templateObject7=function _templateObject7(){return data;};return data;}function _templateObject6(){var data=_taggedTemplateLiteral([\"\\n  display: flex;\\n  justify-content: center;\\n  align-items: center;\\n  width: 100%;\\n  height: 100%;\\n\"]);_templateObject6=function _templateObject6(){return data;};return data;}function _templateObject5(){var data=_taggedTemplateLiteral([\"\\n  width: 100px;\\n  height: 26px;\\n  background-color: #7af7b6;\\n  border: 0;\\n  border-radius: 6px;\\n  font-family: Gopher;\\n\"]);_templateObject5=function _templateObject5(){return data;};return data;}function _templateObject4(){var data=_taggedTemplateLiteral([\"\\n  display: flex;\\n  flex-flow: column;\\n  width: 300px;\\n  max-height: 450px;\\n  background-color: #0e2b52;\\n  border-radius: 20px;\\n  color: white;\\n  text-align: center;\\n  display: inline-block !important;\\n  margin: 1rem;\\n\"]);_templateObject4=function _templateObject4(){return data;};return data;}function _templateObject3(){var data=_taggedTemplateLiteral([\"\\n  text-overflow: ellipsis;\\n  white-space: nowrap;\\n  overflow: hidden;\\n\"]);_templateObject3=function _templateObject3(){return data;};return data;}function _templateObject2(){var data=_taggedTemplateLiteral([\"\\n  margin: 0 1rem;\\n  display: flex;\\n  justify-content: space-between;\\n\"]);_templateObject2=function _templateObject2(){return data;};return data;}function _templateObject(){var data=_taggedTemplateLiteral([\"\\n  display: flex;\\n  flex-flow: column nowrap;\\n  margin-right: 0.5rem;\\n\"]);_templateObject=function _templateObject(){return data;};return data;}import{attributeNames,DEFAULT_NFT_SIZE,POOL_NAMES,PoolIds,ENABLE_BURN_REWARDS_AMOUNT}from\"constants/poolValues\";import useStrainNfts from\"hooks/useStrainNfts\";import React,{useCallback,useEffect,useMemo,useState}from\"react\";import{Spacer}from\"react-neu\";import numeral from\"numeral\";import styled from\"styled-components\";import{Tooltip}from\"react-lightweight-tooltip\";import StyledPrimaryButton from\"./StyledButton\";import AdditionalStakeModal from\"views/Modals/AdditionalStakeModal\";import useBalances from\"hooks/useBalances\";var StyledNft=function StyledNft(_ref){var _updatedNft$attribs3;var nft=_ref.nft,_ref$isDispensary=_ref.isDispensary,isDispensary=_ref$isDispensary===void 0?false:_ref$isDispensary,_ref$isBurnOldNftsPag=_ref.isBurnOldNftsPage,isBurnOldNftsPage=_ref$isBurnOldNftsPag===void 0?false:_ref$isBurnOldNftsPag;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isNftLoading=_useState2[0],setIsNftLoading=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),updatedNft=_useState4[0],setUpdatedNft=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),canBurn=_useState6[0],setCanBurn=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),addStakeModalIsOpen=_useState8[0],setAddStakeModalIsOpen=_useState8[1];var _useStrainNfts=useStrainNfts(),onRetrieve=_useStrainNfts.onRetrieve,onRetrieveOld=_useStrainNfts.onRetrieveOld,onDestroyNft=_useStrainNfts.onDestroyNft,earnedStrnBalance=_useStrainNfts.earnedStrnBalance,isAdding=_useStrainNfts.isAdding,onAddNftStake=_useStrainNfts.onAddNftStake;var _useBalances=useBalances(),strnEthLpBalance=_useBalances.strnEthLpBalance,strnXiotLpBalance=_useBalances.strnXiotLpBalance;var poolName=useMemo(function(){return POOL_NAMES[Number(nft===null||nft===void 0?void 0:nft.poolId)];},[nft===null||nft===void 0?void 0:nft.poolId]);useEffect(function(){if(nft&&!updatedNft){setIsNftLoading(true);onRetrieve(nft).then(function(updated){setUpdatedNft(updated);setIsNftLoading(false);}).catch(function(e){console.error(e);setIsNftLoading(false);});}},[nft===null||nft===void 0?void 0:nft.nftId,updatedNft]);useEffect(function(){if(earnedStrnBalance===undefined)return setCanBurn(false);setCanBurn(earnedStrnBalance.lte(ENABLE_BURN_REWARDS_AMOUNT));},[earnedStrnBalance]);var getAttribute=function getAttribute(name){var _updatedNft$attribs;if(!updatedNft)return\"-\";var attributes=updatedNft===null||updatedNft===void 0?void 0:(_updatedNft$attribs=updatedNft.attribs)===null||_updatedNft$attribs===void 0?void 0:_updatedNft$attribs.attributes;if(!attributes)return\"-\";var found=attributes.find(function(a){return a.trait_type===name;});if(!found)return\"-\";return found.value;};var getName=function getName(){var _updatedNft$attribs2;if(!nft)return\"-\";if(nft===null||nft===void 0?void 0:nft.nftName)return nft===null||nft===void 0?void 0:nft.nftName;return updatedNft===null||updatedNft===void 0?void 0:(_updatedNft$attribs2=updatedNft.attribs)===null||_updatedNft$attribs2===void 0?void 0:_updatedNft$attribs2.name;};var handelUnstake=function handelUnstake(){if(!(nft===null||nft===void 0?void 0:nft.poolId)){console.error(\"for some reason the nft doesn't have a pool id\");return;}onDestroyNft(nft.poolId,nft);};var handleAddStakeClick=useCallback(function(){setAddStakeModalIsOpen(true);},[setAddStakeModalIsOpen]);var handleDismissStakeModal=useCallback(function(){setAddStakeModalIsOpen(false);},[setAddStakeModalIsOpen]);var handleOnAdditionalStake=useCallback(function(amount,stxpAmount){var poolId=(nft===null||nft===void 0?void 0:nft.poolId)||\"0\";// assume pool 0, nft?.poolId should always be populated\nonAddNftStake(poolId,nft.nftId,amount,stxpAmount);handleDismissStakeModal();},[handleDismissStakeModal,onAddNftStake]);var walletBalance=useMemo(function(){// need better way to get specific pool balance\nreturn nft.poolId===\"0\"?strnEthLpBalance:strnXiotLpBalance;},[strnEthLpBalance,strnXiotLpBalance]);var formattedLPBalance=useMemo(function(){if(nft&&(nft===null||nft===void 0?void 0:nft.lpBalance)){if(PoolIds.STRN_ETH===nft.poolId)return numeral(nft.lpBalance).format(\"0.00a\");else return nft.lpBalance.toFixed(8);}else{return\"--\";}},[nft]);var greenRoundedStyle={content:{backgroundColor:\"hsl(215deg 70.4% 33.1% / 100%)\",color:\"#FFFFFF\",fontWeight:600},wrapper:{},gap:{},tooltip:{backgroundColor:\"hsl(215deg 70.4% 33.1% / 100%)\",borderRadius:\"10px\"},arrow:{borderTop:\"solid hsl(215deg 70.4% 33.1% / 100%) 5px\"}};return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(NFTCard,null,!isNftLoading&&/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(StyledHeader,null,/*#__PURE__*/React.createElement(StyledTitle,null,getName()),/*#__PURE__*/React.createElement(\"h3\",null,\"#\",getAttribute(attributeNames.MINTED))),/*#__PURE__*/React.createElement(\"h4\",null,getAttribute(attributeNames.VIBES)),/*#__PURE__*/React.createElement(Spacer,{size:\"sm\"}),/*#__PURE__*/React.createElement(\"img\",{src:updatedNft===null||updatedNft===void 0?void 0:(_updatedNft$attribs3=updatedNft.attribs)===null||_updatedNft$attribs3===void 0?void 0:_updatedNft$attribs3.image,height:DEFAULT_NFT_SIZE}),/*#__PURE__*/React.createElement(Spacer,{size:\"sm\"}),/*#__PURE__*/React.createElement(RarityPill,null,getAttribute(attributeNames.RARITY)),/*#__PURE__*/React.createElement(StyledInfo,null,/*#__PURE__*/React.createElement(Tooltip,{styles:greenRoundedStyle,content:isDispensary?\"Buy / Sell Your NFT \".concat(nft.nftName):!canBurn?\"In order to burn your NFT, you must first claim your rewards.\":\"Burning will release your LP tokens\"},isDispensary?/*#__PURE__*/React.createElement(StyledPrimaryButton// onClick={}\n// disabled={}\n,{text:\"Buy\",size:\"sm\"}):/*#__PURE__*/React.createElement(StyledPrimaryButton,{onClick:handelUnstake,disabled:nft.isDestroying||!canBurn,text:!canBurn?\"Claim first (i)\":nft.isDestroying?\"Burning ...\":\"Burn\",size:\"sm\"})),/*#__PURE__*/React.createElement(StyledLabels,null,/*#__PURE__*/React.createElement(StyledLpLabel,null,/*#__PURE__*/React.createElement(\"div\",null,poolName),/*#__PURE__*/React.createElement(StyledValue,null,(nft===null||nft===void 0?void 0:nft.lpBalance)?formattedLPBalance:\"-\")),isBurnOldNftsPage?null:/*#__PURE__*/React.createElement(StyledPrimaryButton,{text:isAdding?\"...\":\"+\",onClick:handleAddStakeClick,size:\"sm\"})))),isNftLoading&&/*#__PURE__*/React.createElement(StyledLoading,null,\"Loading ...\")),/*#__PURE__*/React.createElement(AdditionalStakeModal,{isOpen:addStakeModalIsOpen,onDismiss:handleDismissStakeModal,onAddStake:handleOnAdditionalStake,label:\"\".concat(getAttribute(attributeNames.LP_TYPE),\" UNI-V2 LP\"),fullBalance:walletBalance}),/*#__PURE__*/React.createElement(Spacer,{size:\"md\"}));};var StyledLpLabel=styled.div(_templateObject());var StyledHeader=styled.div(_templateObject2());var StyledTitle=styled.h3(_templateObject3());var NFTCard=styled.div(_templateObject4());var RarityPill=styled.button(_templateObject5());var StyledLoading=styled.div(_templateObject6());var StyledInfo=styled.div(_templateObject7());var StyledLabels=styled.div(_templateObject8());var StyledValue=styled.span(_templateObject9());export default StyledNft;","map":null,"metadata":{},"sourceType":"module"}